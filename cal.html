<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script> -->
     <style>
        button{
            border:none;
            padding: 0px;
            margin-right: 10px;
            margin-left: 5px;
            height: 60px;
            width: 60px;
        }
     </style>
<script>
    let current_input='';
    let previous_input='';
    let operator='';
    let expression='';
    let history=[];
    let isresult=false;
function appendNumber(number){

    if(isresult){
 current_input=' ';
        expression ='';
        isresult=false;
    }
    
    current_input += number;
        expression += number;
        updateDisplay();
}
function setOperator(op){
    
    if(current_input === ''){
        operator=op;
    }
    else{
        if(current_input !== ''){
            calculate();
        }
    }
    operator=op;
    previous_input=current_input;
    current_input='';
    expression += `${op}`;
}
function calculate(){
        if (previous_input === '' || current_input === '' || operator === '')
        return;
        const number1=parseFloat(previous_input);
        const number2=parseFloat(current_input);
       
        let result=0;
        switch(operator)
        {
            case '+' :
                result=number1+number2;
                break;
            case '-':
                result=number1-number2;
                break;
            case '*':
                result=number1*number2;
                break;
            case '/':
                result=number1/number2;
                break;
            default:
                return;
        }  
        const calculation =`${previous_input}${operator}${current_input}=${result}`;
        history.push(calculation);
        current_input=result.toString();
        operator='';
        previous_input='';
        isresult=true;
        updateDisplay();  
}
function clear(){
        previous_input='';
        current_input='';
        expression='';
        operator='';
        history=[];
        document.getElementById('result').value='';
        document.getElementById('expression').value = '';
}
function updateDisplay(){
   
        document.getElementById('result').value = current_input;
        document.getElementById('expression').value = history.join('\n');
}   
document.addEventListener("keyup",function(event){
    const key=event.key;
    if(!isNaN(key)){
        appendNumber(key);
        
    }else if(['+','-','*','/'].includes(key)){
        setOperator(key);
    }
    else if( key === '=' || key === 'Enter'){
        
        calculate();
        
    }
    else if(key == 'Escape'){
        clear();
    }
});

</script>   
</head>
<body>
    <div class="container  border  justify-content-center  shadow-lg" style="width: 20%; margin-bottom: 20px; margin-top: 200px; " >
    <form >
        <textarea type="text" class="rounded-2"  name="expression" id="expression"  style="width:350px;height: 100px; margin-top: 20px;" readonly ></textarea><br><br>
        <input type="text" class="rounded-2" name="result" id="result" style="width:277px;" readonly> <button class="bg-secondary text-light rounded-circle" type="submit"  style="width:60px; height: 40px;" onclick="clear()">CL</button> <br>

<div class="d-inline-flex p-2 bg-light ">
  <div class="p-1"><button type="button" class="bg-info rounded-circle"  onclick="appendNumber('7')">7</button> </div>
  <div class="p-1"><button type="button" class="bg-info rounded-circle"  onclick="appendNumber('8')">8</button> </div>
  <div class="p-1"><button  type="button" class="bg-info rounded-circle"  onclick="appendNumber('9')">9</button> </div>
  <div class="p-1"><button type="button" class="bg-warning rounded-circle"  onclick="setOperator('/')">/</button> </div>
</div>

<div class="d-inline-flex p-2 bg-light ">
  <div class="p-1"><button class="bg-info rounded-circle" type="button" onclick="appendNumber(4)">4</button> </div>
  <div class="p-1"><button class="bg-info rounded-circle" type="button"  onclick="appendNumber(5)">5</button> </div>
  <div class="p-1"><button class="bg-info rounded-circle" type="button" onclick="appendNumber(6)">6</button> </div>
  <div class="p-1"><button class="bg-warning rounded-circle" type="button" onclick="setOperator('*')">X</button> </div>
</div>

<div class="d-inline-flex p-2 bg-light ">
  <div class="p-1"><button class="bg-info rounded-circle" type="button" value="1" onclick="appendNumber(1)">1</button> </div>
  <div class="p-1"><button class="bg-info rounded-circle" type="button" value="2" onclick="appendNumber(2)">2</button> </div>
  <div class="p-1"><button class="bg-info rounded-circle" type="button" value="3" onclick="appendNumber(3)">3</button> </div>
  <div class="p-1"><button class="bg-warning rounded-circle" type="button" value="-" onclick="setOperator('-')">-</button> </div>
</div>

<div class="d-inline-flex p-2 bg-light ">
  <div class="p-1"><button class="bg-info rounded-circle" type="button"  onclick="appendNumber(0)">0</button> </div>
  <div class="p-1"><button class="bg-info rounded-circle" type="button"  onclick="appendNumber('.')">.</button> </div>
  <div class="p-1"><button class="bg-danger rounded-circle" type="button"  onclick="calculate()">=</button> </div>
  <div class="p-1"><button class="bg-warning rounded-circle" type="button"  onclick="setOperator('+')">+</button> </div>
</div>
</div>
    </form>
    </div>
</body>
</html>